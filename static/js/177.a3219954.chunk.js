"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[177],{295:()=>{},991:(t,e,s)=>{s.d(e,{A:()=>n});var l=s(5304);const n={createPost:t=>l.A.post("/posts/create-post",t),getPostDetail:t=>{const e=`/posts/${t}`;return l.A.get(e)},toggleLike:t=>{const e=`/posts/${t}/toggle-like`;return l.A.post(e)},getAllPosts:()=>l.A.get("/posts"),updatePost:(t,e)=>{const s=`/posts/${t}/update`;return l.A.post(s,e)},deletePost:t=>{console.log(t);const e=`/posts/${t}/delete`;return l.A.delete(e)}}},4913:(t,e,s)=>{s.r(e),s.d(e,{default:()=>I});var l=s(5043),n=s(3519),o=s(1072),i=s(8602),a=s(8139),r=s.n(a),d=s(5173),c=s.n(d),u=s(7852),h=s(579);c().string,c().bool,c().bool,c().bool,c().bool;const g=l.forwardRef(((t,e)=>{let{bsPrefix:s,className:l,fluid:n=!1,rounded:o=!1,roundedCircle:i=!1,thumbnail:a=!1,...d}=t;return s=(0,u.oU)(s,"img"),(0,h.jsx)("img",{ref:e,...d,className:r()(l,n&&`${s}-fluid`,o&&"rounded",i&&"rounded-circle",a&&`${s}-thumbnail`)})}));g.displayName="Image";const m=g;var p=s(3036),x=s(9652),v=s(3709),j=s(3003),f=s(991),A=s(1148),N=s(3910),b=s(7929),y=s(4234),k=s(349);s(295);const I=function(){var t,e,s,a,r,d,c,u,g,I,S;const $=(0,v.Zp)(),{contentId:w}=(0,v.g)(),P=(0,j.d4)((t=>t.user.idUser)),[C,L]=(0,l.useState)(!1),[_,D]=(0,l.useState)(null),[z,T]=(0,l.useState)([]),[R,B]=(0,l.useState)(0),[E,U]=(0,l.useState)([]);(0,l.useEffect)((()=>{w&&(console.log(w),async function(t){const e=await f.A.getPostDetail(t);e&&!0===e.success?(console.log("post",e.post),D(e.post),T(e.recentPosts),U(e.post.favorites)):!e||500!==e.status&&404!==e.status||$("/error-page",{state:{status:e.status,errors:e.errors}})}(w))}),[w]);const[W,q]=(0,l.useState)("Donation");return(0,l.useEffect)((()=>{document.title=W}),[W]),(0,h.jsx)(x.A,{formName:"post-page-detail",children:(0,h.jsxs)(n.A,{style:{marginTop:"50px"},children:[(0,h.jsxs)(o.A,{children:[(0,h.jsxs)(i.A,{md:8,children:[(0,h.jsxs)("div",{className:" mb-0",style:{textAlign:"left"},children:[(0,h.jsx)("div",{style:{display:"inline-block",width:"30px",height:"30px",marginRight:"10px"},children:(0,h.jsx)(A.A,{avatar:_&&_.authorId.avatar,username:"partner"===(null===_||void 0===_||null===(t=_.authorId)||void 0===t?void 0:t.role)?null===_||void 0===_||null===(e=_.authorId)||void 0===e?void 0:e.organizationName:null===_||void 0===_||null===(s=_.authorId)||void 0===s?void 0:s.username,href:"#"})}),(0,h.jsx)("div",{style:{display:"inline-block",textAlign:"left",fontSize:"20px",fontWeight:"bold"},children:(0,h.jsxs)(v.N_,{to:""+(P.toString()===(null===_||void 0===_||null===(a=_.authorId)||void 0===a?void 0:a._id.toString())?"/personal-page":"partner"===(null===_||void 0===_||null===(r=_.authorId)||void 0===r?void 0:r.role)?`/quy/${(0,k.A)(null===_||void 0===_||null===(d=_.authorId)||void 0===d?void 0:d.organizationName)}`:`/taikhoan/${null===_||void 0===_||null===(c=_.authorId)||void 0===c?void 0:c.username}`),state:{personalPageId:null===_||void 0===_||null===(u=_.authorId)||void 0===u?void 0:u._id},style:{textDecoration:"none"},children:[" ","partner"===(null===_||void 0===_||null===(g=_.authorId)||void 0===g?void 0:g.role)?null===_||void 0===_||null===(I=_.authorId)||void 0===I?void 0:I.organizationName:null===_||void 0===_||null===(S=_.authorId)||void 0===S?void 0:S.username]})})]}),(0,h.jsx)("div",{className:"post-date small",style:{textAlign:"left",marginLeft:"40px",color:"gray"},children:_&&new Date(_.createdAt).toLocaleString()}),(0,h.jsx)("h5",{className:"post-title",style:{textAlign:"center",marginLeft:"60px",marginTop:"20px"},children:_&&_.title}),(0,h.jsx)("div",{className:"post-content",style:{textAlign:"justify",marginLeft:"50px",marginRight:"50px"},children:_&&_.content.split("\n").map(((t,e)=>(0,h.jsxs)("p",{children:[" ",t]},e)))}),(0,h.jsx)("div",{className:"post-media",children:_&&_.images.map(((t,e)=>(0,h.jsx)(m,{src:`http://localhost:8080/${t}`,onClick:()=>(t=>{B(t),L(!0)})(e),fluid:!0,style:{width:"45%",margin:"5px"}},e)))}),P&&(0,h.jsx)("div",{className:"like-button mt-5",style:{textAlign:"left",marginLeft:"50px"},children:(0,h.jsxs)("button",{type:"button",className:"btn btn-default btn-xs me-1",onClick:async function(){console.log("click like");const t=[...E],e=t.indexOf(P);-1===e?t.push(P):t.splice(e,1),U(t);const s=await f.A.toggleLike(w);!s||500!==s.status&&404!==s.status||$("/error-page",{state:{status:s.status,errors:s.errors}})},children:[(0,h.jsx)(N.g,{icon:b.Wcv,className:"me-2 "+(E.includes(P)?"text-primary":"")}),"Like"," ",(0,h.jsxs)("span",{className:"pull-right text-muted ms-2",children:[E.length," like",E.length>1?"s":""]})]})})]}),(0,h.jsxs)(i.A,{md:4,className:"bg-success align-self-start rounded mt-5",style:{textAlign:"left",height:"auto"},children:[(0,h.jsx)("h5",{style:{textAlign:"center",marginTop:"10px",color:"white"},children:"B\xe0i vi\u1ebft g\u1ea7n \u0111\xe2y"}),z&&0===z.length&&(0,h.jsx)("p",{className:"text-center",children:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft."}),z&&z.length>0&&z.map(((t,e)=>{var s,l,n;return(0,h.jsxs)("div",{className:"row align-items-center each-post mx-1 ",children:[(0,h.jsx)("div",{className:"recent-post px-0 col-sm-3",children:(0,h.jsx)(m,{src:`http://localhost:8080/${t.images[0]}`,fluid:!0})},t._id),(0,h.jsxs)("div",{className:"col-sm-9",children:[(0,h.jsx)("h6",{className:"text-success",children:(0,h.jsx)(v.N_,{onClick:()=>{return e=t.title||"Donation",void q(e);var e},to:`/posts/${t._id}`,style:{textDecoration:"none"},children:t.title})}),(0,h.jsxs)("p",{style:{fontSize:"13px"},children:["T\xe1c gi\u1ea3:"," ","partner"===(null===t||void 0===t||null===(s=t.authorId)||void 0===s?void 0:s.role)?null===t||void 0===t||null===(l=t.authorId)||void 0===l?void 0:l.organizationName:null===t||void 0===t||null===(n=t.authorId)||void 0===n?void 0:n.username]})]})]})}))]})]}),P&&(0,h.jsx)(o.A,{children:(0,h.jsx)(i.A,{md:8,xs:12,children:(0,h.jsx)(y.A,{type:"post"})})}),(0,h.jsx)(p.A,{show:C,onHide:()=>L(!1),children:(0,h.jsx)(p.A.Body,{children:_&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m,{src:`http://localhost:8080/${_.images[R]}`,fluid:!0}),(0,h.jsxs)("div",{className:"modal-controls text-center mt-3",children:[(0,h.jsx)("button",{className:"btn btn-success me-3",onClick:()=>B((t=>(t-1+_.images.length)%_.images.length)),children:"Tr\u01b0\u1edbc"}),(0,h.jsx)("button",{className:"btn btn-success",onClick:()=>B((t=>(t+1)%_.images.length)),children:"Sau"})]})]})})})]})})}}}]);
//# sourceMappingURL=177.a3219954.chunk.js.map