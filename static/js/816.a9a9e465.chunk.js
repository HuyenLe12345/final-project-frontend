"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[816],{307:()=>{},2167:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var s=a(5043),n=a(3709),o=a(4177),r=a(9652),c=a(6955),l=a(7200),i=a(8802),u=a(5881),d=a(9912),g=a(3003),p=a(7198),h=a(1072),m=a(8602),j=a(6690),f=a(246),N=a(3910),A=a(7929),v=a(6178),x=a.n(v),y=a(579);const D=()=>{const[e,t]=(0,s.useState)(),a=(0,g.d4)((e=>e.user.idUser)),v=(0,g.d4)((e=>e.user.role)),D=(0,n.Zp)(),[C,P]=(0,s.useState)(!1),[b,S]=(0,s.useState)(""),[w,I]=(0,s.useState)([]),[k,$]=(0,s.useState)(""),[O,L]=(0,s.useState)(""),[z,T]=(0,s.useState)(""),[Y,B]=(0,s.useState)(""),[H,M]=(0,s.useState)(""),[_,Q]=(0,s.useState)([]),[U,E]=(0,s.useState)([]),[F,G]=(0,s.useState)(""),[R,X]=(0,s.useState)(v&&"partner"===v?{page:1,count:20,searchStatus:"",projectName:"",searchDate:"",searchContent:"",typeOfDonation:""}:{page:1,count:20,searchStatus:"",projectName:"",searchDate:"",searchContent:"",typeOfDonation:"",organization:""}),[Z,q]=(0,s.useState)(0),[J,K]=(0,s.useState)(null),[V,W]=(0,s.useState)(null);async function ee(){let e,s;if("partner"===v){const e={page:R.page,count:R.count,status:R.searchStatus,searchDate:R.searchDate,searchContent:R.searchContent,typeOfDonation:R.typeOfDonation,projectName:R.projectName,organizationId:a};s="?"+f.A.stringify(e)}else if("admin 1"===v||"admin 2"===v){const e={page:R.page,count:R.count,status:R.searchStatus,searchDate:R.searchDate,searchContent:R.searchContent,typeOfDonation:R.typeOfDonation,projectName:R.projectName,organization:R.organization};s="?"+f.A.stringify(e)}console.log(s),e=await c.A.getDonationList(s),e&&!0===e.success?(t(e.donationList),q(Math.ceil(e.totalCount/R.count))):!e||500!==e.status&&404!==e.status||D("/error-page",{state:{status:e.status,errors:e.errors}})}(0,s.useEffect)((()=>{v&&ee()}),[R]),(0,s.useEffect)((()=>{v&&"partner"===v&&a?async function(e){console.log("projectlist");const t=await l.A.getProjectList(e);if(console.log("response"),t&&!0===t.success){console.log("success");const e=t.projectList.map((e=>({value:e._id,label:e.title})));e.unshift({value:"",label:"D\u1ef1 \xe1n"}),Q(e)}else!t||500!==t.status&&404!==t.status||D("/error-page",{state:{status:t.status,errors:t.errors}})}(a):!v||"admin 1"!==v&&"admin 2"!==v||(async function(){console.log("projectlist");const e=await l.A.getAllProjectList();if(console.log("response"),e&&!0===e.success){console.log("success");const t=e.projectList.map((e=>({value:e._id,label:e.title})));t.unshift({value:"",label:"D\u1ef1 \xe1n"}),Q(t)}else!e||500!==e.status&&404!==e.status||D("/error-page",{state:{status:e.status,errors:e.errors}})}(),async function(){console.log("org");const e=await i.A.getOrganizationList();if(console.log("response"),e&&!0===e.success){console.log("success");const t=e.organizationList.map((e=>({value:e._id,label:e.organizationName})));t.unshift({value:"",label:"T\u1ed5 ch\u1ee9c"}),E(t)}else!e||500!==e.status&&404!==e.status||D("/error-page",{state:{status:e.status,errors:e.errors}})}())}),[a]);const te=()=>{P(!1)};return(0,y.jsxs)(r.A,{formName:"donation-management",children:[(0,y.jsxs)(h.A,{className:"filter-container justify-content-sm-start justify-content-md-between align-items-center",children:[(0,y.jsxs)(m.A,{className:"filter-options row justify-content-start mb-0 col-auto",children:[v&&("admin 1"===v||"admin 2"===v)&&(0,y.jsx)(p.A,{value:F,type:"select",id:"organizationName",name:"organizationName",sharedName:"col-auto",className:"filter-control search-project",onChange:e=>{G(e.target.value),X((t=>({...t,organization:e.target.value})))},options:U}),(0,y.jsx)(p.A,{value:H,type:"select",id:"projectName",name:"projectName",sharedName:"col-auto",className:"filter-control search-project",onChange:e=>{M(e.target.value),X((t=>({...t,projectName:e.target.value})))},placeholder:"T\xecm ki\u1ebfm d\u1ef1 \xe1n",options:_}),(0,y.jsx)(p.A,{value:k,type:"select",id:"status",name:"status",sharedName:"col-auto",className:"filter-control search-status ",onChange:e=>{$(e.target.value),X((t=>({...t,searchStatus:e.target.value})))},options:[{value:"",label:"Tr\u1ea1ng th\xe1i"},{value:"pending",label:"Ch\u1edd duy\u1ec7t"},{value:"confirm",label:"\u0110\xe3 nh\u1eadn"},{value:"reject",label:"T\u1eeb ch\u1ed1i"}]}),(0,y.jsx)(p.A,{value:O,type:"date",id:"searchDate",name:"searchDate",sharedName:"col-auto",className:"filter-control search-date",onChange:e=>{const t=e.target.value,a=x()(t).format("YYYY-MM-DD");L(t),X((e=>({...e,searchDate:a})))}}),(0,y.jsx)(p.A,{value:Y,type:"select",id:"typeOfDonation",name:"typeOfDonation",sharedName:"col-auto",className:"filter-control search-type",onChange:e=>{B(e.target.value),X((t=>({...t,typeOfDonation:e.target.value})))},options:[{value:"",label:"Quy\xean g\xf3p"},{value:"money",label:"Ti\u1ec1n"},{value:"clothes",label:"Qu\u1ea7n \xe1o"},{value:"book",label:"S\xe1ch"}]})]}),(0,y.jsx)(m.A,{className:"search-bar justify-content-xl-end justify-content-start col-auto ",children:(0,y.jsxs)("div",{className:"search-input-container",children:[(0,y.jsx)(N.g,{icon:A.$UM,className:"search-icon"}),(0,y.jsx)(p.A,{value:z,type:"text",id:"searchContent",name:"searchContent",className:"search-input",placeholder:"T\xecm ki\u1ebfm",onChange:e=>{T(e.target.value),X((t=>({...t,searchContent:e.target.value})))}})]})})]}),v&&"partner"===v&&(0,y.jsx)(o.A,{title:"DANH S\xc1CH QUY\xcaN G\xd3P",type:"donation",detail:e,actionHandler:(e,t,a,s)=>{S(e),I(t),P(!0),K(a),W(s)},onOpen:e=>{P(!0)},className:"donation-list",selectedIDs:w,role:"partner"}),v&&("admin 1"===v||"admin 2"===v)&&(0,y.jsx)(o.A,{title:"DANH S\xc1CH QUY\xcaN G\xd3P",type:"donation",detail:e,className:"donation-list",selectedIDs:w,role:v}),(0,y.jsx)(j.A,{pagination:R,handlerChangePage:e=>{X((t=>({...t,page:e})))},totalPage:Z}),(0,y.jsx)(h.A,{children:(0,y.jsx)(u.A,{isOpen:C,onClose:te,children:(0,y.jsx)(d.A,{action:b,registered:J||"",typeOfDona:V||"",onClose:te,selectedIDs:w,onBulkConfirm:async(e,t)=>{const a=await c.A.updateDonation({donationIds:e,action:t});a&&!0===a.success?(window.alert("X\xe1c nh\u1eadn th\xe0nh c\xf4ng!"),ee()):a&&400===a.status?window.alert(a.errors):!a||500!==a.status&&404!==a.status||D("/error-page",{state:{status:a.status,errors:a.errors}}),console.log("X\xe1c nh\u1eadn c\xe1c ID:",e)},onBulkReject:async(e,t,a)=>{const s=await c.A.updateDonation({donationIds:e,action:t,reasonForRejection:a});s&&!0===s.success?(window.alert("T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng!"),ee()):!s||500!==s.status&&404!==s.status||D("/error-page",{state:{status:s.status,errors:s.errors}}),console.log("T\u1eeb ch\u1ed1i c\xe1c ID:",e)},onCorrect:async(e,t,a)=>{const s=await c.A.updateDonation({donationIds:e,action:t,exact:a});s&&!0===s.success?(window.alert("\u0110\xednh ch\xednh th\xe0nh c\xf4ng"),ee()):!s||500!==s.status&&404!==s.status||D("/error-page",{state:{status:s.status,errors:s.errors}}),console.log("\u0110\xednh ch\xednh c\xe1c ID:",e)}})})})]})}},6690:(e,t,a)=>{a.d(t,{A:()=>c});a(5043);var s=a(579);function n(e){const{indexPage:t,handlerChangePage:a,pagination:n}=e,{page:o}=n;return console.log(t),(0,s.jsx)("div",{className:"d-flex ",children:t&&t.map((e=>(0,s.jsx)("li",{className:e===parseInt(o)?"page-item active ":"page-item",onClick:()=>(e=>{a&&a(e)})(e),children:(0,s.jsx)("a",{className:"page-link",children:e})},e)))})}n.defaultProps={indexPage:null,handlerChangePage:null,pagination:{}};const o=n;function r(e){const{pagination:t,handlerChangePage:a,totalPage:n}=e;console.log(n);const{page:r}=t;let c=[];for(var l=1;l<=n;l++)c.push(l);return(0,s.jsxs)("nav",{"aria-label":"Page navigation example",className:"pt-5",children:[(0,s.jsxs)("ul",{className:"pagination justify-content-center justify-content-lg-end",children:[(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{className:"page-link",onClick:()=>(e=>{if(!a)return;const t=parseInt(e)-1;a(t)})(r),disabled:r<=1,children:(0,s.jsx)("span",{children:"\xab"})})}),(0,s.jsx)(o,{indexPage:c,handlerChangePage:a,pagination:t}),(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{className:"page-link",onClick:()=>(e=>{if(!a)return;const t=parseInt(e)+1;a(t)})(r),disabled:r>=n,children:(0,s.jsx)("span",{children:"\xbb"})})})]}),(0,s.jsx)("div",{className:"pagination justify-content-center justify-content-lg-end",children:(0,s.jsxs)("p",{className:"text-small text-muted mb-0",children:["Showing 1\u201310 of ",10*parseInt(n)," results"]})})]})}r.defaultProps={pagination:{},handlerChangePage:null,totalPage:null};const c=r},6955:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5304);const n={submitDonationInfo:(e,t)=>{const a=`/projects/${e}/donate`;return s.A.post(a,t)},getDonationList:e=>{const t=`/admin/get/all-donation/${e}`;return s.A.get(t)},updateDonation:e=>s.A.put("/admin/donations",e),searchStatus:e=>{const t=`/admin/donation${e}`;return s.A.post(t)},deleteDonationInfo:e=>{const t=`/projects/donations/${e}`;return s.A.delete(t)}}},7200:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5304);const n={postProjectForm:e=>s.A.post("/admin/project-form",e),getDonationListByProjectId:(e,t)=>{const a=`/projects/${e}/donations${t}`;return s.A.get(a)},getDonationByName:(e,t)=>{const a=`/projects/${e}/donationByName${t}`;return s.A.get(a)},getProjectDetail:e=>{const t=`/projects/${e}`;return s.A.get(t)},getProjectDetailFormToEdit:e=>{const t=`/projects/edit/${e}`;return s.A.get(t)},updateProjectDetail:(e,t)=>{const a=`/projects/update/${e}`;return s.A.post(a,t)},getProjectList:e=>{const t=`/admin/projects/${e}`;return s.A.get(t)},getAllProjectList:()=>s.A.get("/projects/all"),getActiveProjects:()=>s.A.get("/projects/active"),getInactiveProjects:()=>s.A.get("/projects/inactive")}},9652:(e,t,a)=>{a.d(t,{A:()=>n});a(307);var s=a(579);const n=e=>{let{children:t,formName:a,formTitle:n,errorMessage:o}=e;return(0,s.jsxs)("div",{className:`container-md  card ${a}`,children:[(0,s.jsx)("h5",{children:n}),o&&(0,s.jsxs)("p",{style:{color:"red",fontSize:"12px"},children:["*",o]}),t]})}}}]);
//# sourceMappingURL=816.a9a9e465.chunk.js.map